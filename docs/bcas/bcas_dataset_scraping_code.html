<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>China Science Vector - Analysing Website Structure</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../img/favicon.svg" rel="icon" type="image/svg+xml">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">China Science Vector</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../bcas/bcas_project.html"> 
<span class="menu-text">BCAS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../bcae/about_bcae.html"> 
<span class="menu-text">BCAE</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/dzmitry-mazanik-a84b51246/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:dmitrymazanik42@gmail.com"> <i class="bi bi-envelope" role="img" aria-label="email">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/DzmitryMazanik/china_science_vector"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Analysing Website Structure</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>First we should investigate the structure of the website. Article data we are looking for is in the section ‘Past Issues’ (过刊目录).</p>
<p>Each issue page contains links to the full article in PDF or HTML, and abstracts (摘要) which we will explore next. Article pages contain a lot of data about publications: - title - date - issue - authors - affiliations - abstracts - keywords - associated fund projects - views and downloads statistics.</p>
<p>Recent text data is presented in both Chinese and English, but older articles include only Chinese.</p>
<section id="scraping-data" class="level1">
<h1>Scraping Data</h1>
<p>The old version of the BCAS website doesn’t use JavaScript animations, so the classic <code>BeautifulSoup</code> library is enough at this stage.</p>
<div id="6e88909b-94cd-41d7-a6f1-bf8fc9d82973" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="issues" class="level2">
<h2 class="anchored" data-anchor-id="issues">Issues</h2>
<p>Our final goal is to retrieve the data on the articles. The website structure shows that the links to the articles can be found inside issues. So, our first move is to get the links to the issues.</p>
<div id="a43d58dd-3b9c-4983-a342-9742f1b7e65c" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the webpage with links to all issues</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"http://old2022.bulletin.cas.cn/zgkxyyk/ch/reader/issue_browser.aspx"</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># path to save URLs</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>issues <span class="op">=</span> <span class="st">'data/bcas_issues.txt'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="618d1981-d2f1-4618-85c8-41953b1b7245" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_urls(url):</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Extracts all URLs from a given webpage.</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">    This function sends a GET request to the specified URL, parses the HTML content,</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">    and extracts all hyperlinks (href attributes of &lt;a&gt; tags) from the page.</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">    url (str): The URL of the webpage to scrape.</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">    list or None: A list of URLs found on the page if successful, None if an error occurs.</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co">    Raises:</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">    Any exceptions from the requests or BeautifulSoup libraries are caught and printed.</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co">    Example:</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co">    &gt;&gt;&gt; urls = get_urls('https://example.com')</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">    &gt;&gt;&gt; if urls:</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co">    ...     print(f"Found {len(urls)} URLs")</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">    ... else:</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co">    ...     print("Failed to retrieve URLs")</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>        response <span class="op">=</span> requests.get(url)</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>        soup <span class="op">=</span> BeautifulSoup(response.content, <span class="st">"html.parser"</span>)</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>        urls <span class="op">=</span> []</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>        links <span class="op">=</span> soup.find_all(<span class="st">'a'</span>)</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> link <span class="kw">in</span> links:</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>            href <span class="op">=</span> link.get(<span class="st">'href'</span>)</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> href:</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>                urls.append(href)</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> urls</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Error:"</span>, <span class="bu">str</span>(e))</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="99138a19-2c50-4985-a76e-f0e7bb3455a3" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># function to save URLs to a txt</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> save_urls(urls, txt):</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(txt, <span class="st">'w'</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> url <span class="kw">in</span> urls:</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> url.startswith(<span class="st">'issue_list.aspx?year_id='</span>):</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>                <span class="bu">file</span>.write(</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'http://old2022.bulletin.cas.cn/zgkxyyk/ch/reader/'</span> <span class="op">+</span> url <span class="op">+</span> <span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Issues URLs saved to"</span>, txt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="1f5a4c64-975f-4119-8ebf-bf0aa0e15bd1" class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>urls <span class="op">=</span> get_urls(url)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>save_urls(urls, issues)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="articles" class="level2">
<h2 class="anchored" data-anchor-id="articles">Articles</h2>
<p>Once we get the links to the issues, we can itearate through them and retrieve the links to the desired articles.</p>
<div id="ccf07d17" class="cell" data-execution_count="118">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>articles <span class="op">=</span> <span class="st">'data/bcas_articles.txt'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="23c46336" class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(articles, <span class="st">"a"</span>) <span class="im">as</span> output:</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Read the list of webpages from issues.txt</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(issues, <span class="st">"r"</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        issue_urls <span class="op">=</span> <span class="bu">file</span>.read().splitlines()</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># iterate through each URL</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> url <span class="kw">in</span> issue_urls:</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>        article_urls <span class="op">=</span> get_urls(url)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> article_urls:</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Save article URLs by appending to the file</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> article_url <span class="kw">in</span> article_urls:</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> article_url.startswith(<span class="st">'view_abstract.aspx?file_no='</span>):</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>                    output.write(</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>                        <span class="st">'http://old2022.bulletin.cas.cn/zgkxyyk/ch/reader/'</span> <span class="op">+</span> article_url <span class="op">+</span> <span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Article URLs saved to"</span>, articles)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="db3016e4" class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> remove_duplicates(file_path):</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(file_path, <span class="st">'r'</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>        lines <span class="op">=</span> <span class="bu">file</span>.readlines()</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove duplicates while preserving order</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    unique_lines <span class="op">=</span> []</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    seen <span class="op">=</span> <span class="bu">set</span>()</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> lines:</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> line <span class="kw">not</span> <span class="kw">in</span> seen:</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>            seen.add(line)</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>            unique_lines.append(line)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Write the unique lines back to the file</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(file_path, <span class="st">'w'</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>        <span class="bu">file</span>.writelines(unique_lines)</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Duplicates removed. Check </span><span class="sc">{</span>file_path<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>remove_duplicates(articles)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="article-data" class="level2">
<h2 class="anchored" data-anchor-id="article-data">Article Data</h2>
<p>Now we can scrape the data for each BCAS article. To do so we need to analyze the HTML structure of the pages and determine CSS selectors for the desired elements.</p>
<section id="define-elements" class="level3">
<h3 class="anchored" data-anchor-id="define-elements">Define Elements</h3>
<div id="56ff533e" class="cell" data-execution_count="220">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get text of an element if it exists</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_element(soup, selector):</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    element <span class="op">=</span> soup.select_one(selector)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> element.get_text(strip<span class="op">=</span><span class="va">True</span>, separator<span class="op">=</span><span class="st">","</span>) <span class="cf">if</span> element <span class="cf">else</span> <span class="st">""</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="04b3263c" class="cell" data-execution_count="225">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># function to extract text using BeautifulSoup</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_data(url):</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>        response <span class="op">=</span> requests.get(url)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>        response.raise_for_status()</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>        soup <span class="op">=</span> BeautifulSoup(response.content, <span class="st">"html.parser"</span>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>        <span class="co"># extracting data using CSS selectors</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>        title_cn <span class="op">=</span> get_element(soup, <span class="st">'span#FileTitle'</span>)</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>        title_en <span class="op">=</span> get_element(soup, <span class="st">'span#EnTitle'</span>)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>        author_cn <span class="op">=</span> get_element(soup, <span class="st">'div.cn_author'</span>)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>        author_en <span class="op">=</span> get_element(soup, <span class="st">'div.en_author'</span>)</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>        org_cn <span class="op">=</span> get_element(soup, <span class="st">'div.cn_unit'</span>)</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>        org_en <span class="op">=</span> get_element(soup, <span class="st">'div.en_unit'</span>)</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>        abstract_cn <span class="op">=</span> get_element(soup, <span class="st">'div.zw_zhaiyao'</span>)</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>        abstract_en <span class="op">=</span> get_element(soup, <span class="st">'div.yw_zhaiyao'</span>)</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>        keywords_cn <span class="op">=</span> get_element(soup, <span class="st">'div.zw_gjc'</span>)</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>        keywords_en <span class="op">=</span> get_element(soup, <span class="st">'div.yw_gjc'</span>)</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>        fund_project <span class="op">=</span> get_element(soup, <span class="st">'div.jjxm'</span>)</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>        date <span class="op">=</span> get_element(soup, <span class="st">'div.d_deta.fr'</span>)</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>        views <span class="op">=</span> get_element(soup, <span class="st">'span#ClickNum'</span>)</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>        downloads <span class="op">=</span> get_element(soup, <span class="st">'span#PDFClickNum'</span>)</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> {</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>            <span class="st">"url"</span>: url,</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>            <span class="st">"title_cn"</span>: title_cn,</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>            <span class="st">"title_en"</span>: title_en,</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>            <span class="st">"author_cn"</span>: author_cn,</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>            <span class="st">"author_en"</span>: author_en,</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>            <span class="st">"org_cn"</span>: org_cn,</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>            <span class="st">"org_en"</span>: org_en,</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>            <span class="st">"abstract_cn"</span>: abstract_cn,</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>            <span class="st">"abstract_en"</span>: abstract_en,</span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>            <span class="st">"keywords_cn"</span>: keywords_cn,</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>            <span class="st">"keywords_en"</span>: keywords_en,</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>            <span class="st">"fund_project"</span>: fund_project,</span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>            <span class="st">"date"</span>: date,</span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>            <span class="st">"views"</span>: views,</span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>            <span class="st">"downloads"</span>: downloads,</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"An error occurred while processing </span><span class="sc">{</span>url<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="4005bd6d" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dataset csv path</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>dataset <span class="op">=</span> <span class="st">"data/bcas_dataset.csv"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="b762bf25" class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(dataset, mode<span class="op">=</span><span class="st">"w"</span>, newline<span class="op">=</span><span class="st">""</span>) <span class="im">as</span> csv_file:</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    fieldnames <span class="op">=</span> [</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">"url"</span>, <span class="st">"date"</span>, <span class="st">"views"</span>, <span class="st">"downloads"</span>,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"author_cn"</span>, <span class="st">"author_en"</span>,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"title_cn"</span>, <span class="st">"title_en"</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"org_cn"</span>, <span class="st">"org_en"</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"abstract_cn"</span>, <span class="st">"abstract_en"</span>,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"keywords_cn"</span>, <span class="st">"keywords_en"</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">"fund_project"</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    writer <span class="op">=</span> csv.DictWriter(csv_file, fieldnames<span class="op">=</span>fieldnames, delimiter<span class="op">=</span><span class="st">"|"</span>)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    writer.writeheader()</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># read the list of URLs from the file</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(articles, <span class="st">"r"</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>        article_urls <span class="op">=</span> <span class="bu">file</span>.read().splitlines()</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>        <span class="co"># iterate through each url, extract data, and write to csv</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> url <span class="kw">in</span> article_urls:</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> get_data(url)</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> data:</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>                writer.writerow(data)</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Data has been extracted and saved to </span><span class="sc">{</span>dataset<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="f0e39c93" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>dataset_fixed <span class="op">=</span> <span class="st">"data/bcas_dataset_fixed.csv"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="e5730994" class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fix broken lines in the csv</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fix_lines(dataset_csv, dataset_csv_fixed):</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(dataset_csv, mode<span class="op">=</span><span class="st">'r'</span>, encoding<span class="op">=</span><span class="st">'utf-8'</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>        content <span class="op">=</span> <span class="bu">file</span>.read()</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Replace all line endings with empty string to remove them</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    content <span class="op">=</span> content.replace(<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>, <span class="st">''</span>)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add a new line before each 'http' to separate URLs</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    content <span class="op">=</span> content.replace(</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">'http://old2022.bulletin.cas.cn/'</span>, <span class="st">'</span><span class="ch">\n</span><span class="st">http://old2022.bulletin.cas.cn/'</span>)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(dataset_csv_fixed, mode<span class="op">=</span><span class="st">'w'</span>, encoding<span class="op">=</span><span class="st">'utf-8'</span>) <span class="im">as</span> outfile:</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>        outfile.write(content)</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>fix_lines(dataset, dataset_fixed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="similar-articles" class="level3">
<h3 class="anchored" data-anchor-id="similar-articles">Similar Articles</h3>
<p>Our goal is to clasterize the articles using available texts – so the more useful texts we have, the better. On the pages there is a section called “Similar Articles” (相似文献). The titles of similar publications may be useful for topic modeling, for it increases the chances for articles with similar referencies to appear in the same cluster.</p>
<p>Accessing this data requires clicking a “Similar Articles” button, otherwise the text is not present on the page. We can simulate clicking (and a do lot of other useful stuff) using Selenium library.</p>
<div id="82218da8" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium <span class="im">import</span> webdriver</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium.webdriver.support.ui <span class="im">import</span> WebDriverWait</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium.webdriver.support <span class="im">import</span> expected_conditions <span class="im">as</span> EC</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium.common.exceptions <span class="im">import</span> TimeoutException</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium.common.exceptions <span class="im">import</span> WebDriverException</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium.webdriver.common.by <span class="im">import</span> By</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="8d42b6e9" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>similar_csv <span class="op">=</span> <span class="st">'data/bcas_similar.csv'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="2013c4e6" class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(similar_csv, mode<span class="op">=</span><span class="st">"w"</span>, newline<span class="op">=</span><span class="st">""</span>, encoding<span class="op">=</span><span class="st">"utf-8"</span>) <span class="im">as</span> csv_file:</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    fieldnames <span class="op">=</span> [<span class="st">"url"</span>, <span class="st">"similar"</span>]</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    writer <span class="op">=</span> csv.DictWriter(csv_file, fieldnames<span class="op">=</span>fieldnames, delimiter<span class="op">=</span><span class="st">"|"</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    writer.writeheader()</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> initialize_driver():</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    firefox_options <span class="op">=</span> webdriver.FirefoxOptions()</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>    firefox_options.add_argument(<span class="st">"--headless"</span>)</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> webdriver.Firefox(options<span class="op">=</span>firefox_options)</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>driver <span class="op">=</span> initialize_driver()</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> []</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(articles, <span class="st">'r'</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>    urls <span class="op">=</span> <span class="bu">file</span>.read().splitlines()</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over the URLs</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> url <span class="kw">in</span> urls:</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>        driver.get(url)</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>        WebDriverWait(driver, <span class="dv">10</span>).until(EC.element_to_be_clickable(</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>            (By.XPATH, <span class="st">'//div[text()="相似文献"]'</span>))).click()</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>        WebDriverWait(driver, <span class="dv">10</span>).until(</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>            EC.presence_of_element_located((By.CLASS_NAME, <span class="st">"ArticleList"</span>)))</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>        html <span class="op">=</span> driver.page_source</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>        soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>        <span class="co"># find all &lt;a&gt; with class "ArticleList"</span></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>        links <span class="op">=</span> soup.find_all(<span class="st">'a'</span>, class_<span class="op">=</span><span class="st">'ArticleList'</span>)</span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>        <span class="co"># extract the text from each element</span></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>        similar_list <span class="op">=</span> [link.text.strip() <span class="cf">for</span> link <span class="kw">in</span> links]</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> TimeoutException:</span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>        similar_list <span class="op">=</span> [<span class="st">'time_error'</span>]</span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> WebDriverException:</span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>        max_retries <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>        retry_count <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> retry_count <span class="op">&lt;</span> max_retries:</span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a>            <span class="cf">try</span>:</span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a>                time.sleep(<span class="dv">3</span>)</span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a>                driver.quit()</span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a>                driver <span class="op">=</span> initialize_driver()</span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a>                driver.get(url)</span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a>                WebDriverWait(driver, <span class="dv">2</span>).until(EC.element_to_be_clickable(</span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a>                    (By.XPATH, <span class="st">'//div[text()="相似文献"]'</span>))).click()</span>
<span id="cb17-53"><a href="#cb17-53" aria-hidden="true" tabindex="-1"></a>                WebDriverWait(driver, <span class="dv">2</span>).until(</span>
<span id="cb17-54"><a href="#cb17-54" aria-hidden="true" tabindex="-1"></a>                    EC.presence_of_element_located((By.CLASS_NAME, <span class="st">"ArticleList"</span>)))</span>
<span id="cb17-55"><a href="#cb17-55" aria-hidden="true" tabindex="-1"></a>                html <span class="op">=</span> driver.page_source</span>
<span id="cb17-56"><a href="#cb17-56" aria-hidden="true" tabindex="-1"></a>                soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb17-57"><a href="#cb17-57" aria-hidden="true" tabindex="-1"></a>                links <span class="op">=</span> soup.find_all(<span class="st">'a'</span>, class_<span class="op">=</span><span class="st">'ArticleList'</span>)</span>
<span id="cb17-58"><a href="#cb17-58" aria-hidden="true" tabindex="-1"></a>                similar_list <span class="op">=</span> [link.text.strip() <span class="cf">for</span> link <span class="kw">in</span> links]</span>
<span id="cb17-59"><a href="#cb17-59" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span></span>
<span id="cb17-60"><a href="#cb17-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-61"><a href="#cb17-61" aria-hidden="true" tabindex="-1"></a>            <span class="cf">except</span> (WebDriverException, TimeoutException):</span>
<span id="cb17-62"><a href="#cb17-62" aria-hidden="true" tabindex="-1"></a>                retry_count <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb17-63"><a href="#cb17-63" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> retry_count <span class="op">==</span> max_retries:</span>
<span id="cb17-64"><a href="#cb17-64" aria-hidden="true" tabindex="-1"></a>                    similar_list <span class="op">=</span> [<span class="st">'web_error'</span>]</span>
<span id="cb17-65"><a href="#cb17-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-66"><a href="#cb17-66" aria-hidden="true" tabindex="-1"></a>    <span class="cf">finally</span>:</span>
<span id="cb17-67"><a href="#cb17-67" aria-hidden="true" tabindex="-1"></a>        data.append({<span class="st">'url'</span>: url, <span class="st">'similar'</span>: similar_list})</span>
<span id="cb17-68"><a href="#cb17-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-69"><a href="#cb17-69" aria-hidden="true" tabindex="-1"></a>        <span class="cf">with</span> <span class="bu">open</span>(similar_csv, <span class="st">'a'</span>, newline<span class="op">=</span><span class="st">''</span>) <span class="im">as</span> csvfile:</span>
<span id="cb17-70"><a href="#cb17-70" aria-hidden="true" tabindex="-1"></a>            writer <span class="op">=</span> csv.DictWriter(csvfile, fieldnames<span class="op">=</span>[</span>
<span id="cb17-71"><a href="#cb17-71" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">'url'</span>, <span class="st">'similar'</span>], delimiter<span class="op">=</span><span class="st">"|"</span>)</span>
<span id="cb17-72"><a href="#cb17-72" aria-hidden="true" tabindex="-1"></a>            writer.writerow({<span class="st">'url'</span>: url, <span class="st">'similar'</span>: similar_list})</span>
<span id="cb17-73"><a href="#cb17-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-74"><a href="#cb17-74" aria-hidden="true" tabindex="-1"></a>driver.quit()</span>
<span id="cb17-75"><a href="#cb17-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-76"><a href="#cb17-76" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Extraction and saving to </span><span class="sc">{</span>similar_csv<span class="sc">}</span><span class="ss"> completed."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="merge" class="level3">
<h3 class="anchored" data-anchor-id="merge">Merge</h3>
<div id="41f139ad" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(dataset_fixed, sep<span class="op">=</span><span class="st">'|'</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>df.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>(7211, 15)</code></pre>
</div>
</div>
<div id="2321bafd" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">url</th>
<th data-quarto-table-cell-role="th">date</th>
<th data-quarto-table-cell-role="th">views</th>
<th data-quarto-table-cell-role="th">downloads</th>
<th data-quarto-table-cell-role="th">author_cn</th>
<th data-quarto-table-cell-role="th">author_en</th>
<th data-quarto-table-cell-role="th">title_cn</th>
<th data-quarto-table-cell-role="th">title_en</th>
<th data-quarto-table-cell-role="th">org_cn</th>
<th data-quarto-table-cell-role="th">org_en</th>
<th data-quarto-table-cell-role="th">abstract_cn</th>
<th data-quarto-table-cell-role="th">abstract_en</th>
<th data-quarto-table-cell-role="th">keywords_cn</th>
<th data-quarto-table-cell-role="th">keywords_en</th>
<th data-quarto-table-cell-role="th">fund_project</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>中国科学院院刊:2024,39(1):0-0</td>
<td>320</td>
<td>438</td>
<td>NaN</td>
<td>NaN</td>
<td>目录</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>中文摘要:</td>
<td>Abstract:</td>
<td>中文关键词:</td>
<td>keywords:</td>
<td>基金项目:</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>中国科学院院刊:2024,39(1):1-9</td>
<td>975</td>
<td>998</td>
<td>李国杰</td>
<td>LI Guojie</td>
<td>智能化科研（AI4R）：第五科研范式</td>
<td>AI4R: The fifth scientific research paradigm</td>
<td>(中国科学院计算技术研究所 北京 100190)</td>
<td>(Institute of Computing Technology, Chinese Ac...</td>
<td>中文摘要:,文章将“智能化科研”（AI4R）称为第五科研范式，概括它的一系列特征包括：（1）...</td>
<td>Abstract:,This article refers to “AI for Resea...</td>
<td>中文关键词:,智能化科研,涌现,组合爆炸问题,非确定计算,大科学模型,科研大平台</td>
<td>keywords:,AI4R,emergence,combinatorial explosi...</td>
<td>基金项目:</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>中国科学院院刊:2024,39(1):10-16</td>
<td>630</td>
<td>542</td>
<td>鄂维南,1,2</td>
<td>E Weinan,1,2</td>
<td>AI助力打造科学研究新范式</td>
<td>AI helps to establish a new paradigm for scien...</td>
<td>(1.北京大学 北京 100871;2.北京科学智能研究院 北京 100084)</td>
<td>(1.Perking University, Beijing 100871, China;2...</td>
<td>中文摘要:,科学研究的目的是发现基本原理和解决实际问题。尽管人类在发现基本原理和解决实际问题...</td>
<td>Abstract:,The main purpose of scientific resea...</td>
<td>中文关键词:,人工智能驱动的科学研究,科学计算,安卓模式</td>
<td>keywords:,scientific research driven by AI,sci...</td>
<td>基金项目:</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>中国科学院院刊:2024,39(1):17-26</td>
<td>470</td>
<td>448</td>
<td>谭光明,,,贾伟乐,,,王展,,,元国军,,,邵恩,,,孙凝晖*</td>
<td>TAN Guangming,,,JIA Weile,,,WANG Zhan,,,YUAN G...</td>
<td>面向模拟智能的计算系统</td>
<td>Computing system for simulation intelligence</td>
<td>(中国科学院计算技术研究所 北京 100190)</td>
<td>(Institute of Computing Technology, Chinese Ac...</td>
<td>中文摘要:,科学研究中的计算机模拟称为科学模拟（scientific simulation）...</td>
<td>Abstract:,This study refers computer simulatio...</td>
<td>中文关键词:,科学模拟,模拟智能,人工智能,计算系统,Z级计算</td>
<td>keywords:,scientific simulation,simulation int...</td>
<td>基金项目:,国家杰出青年科学基金（T2125013）</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>中国科学院院刊:2024,39(1):27-33</td>
<td>579</td>
<td>632</td>
<td>王飞跃,1,2,,,王雨桐,1,3</td>
<td>WANG Fei-Yue,1,2,,,WANG Yutong,1,3</td>
<td>数字科学家与平行科学：AI4S和S4AI的本源与目标</td>
<td>Digital scientists and parallel sciences: The ...</td>
<td>(1.中国科学院自动化研究所 复杂系统管理与控制国家重点实验室 北京 100190;2.澳门...</td>
<td>(1.State Key Laboratory for Management and Con...</td>
<td>中文摘要:,围绕人工智能（AI）大模型技术的最新进展，从AI4S （人工智能驱动的科学研究）...</td>
<td>Abstract:,Based on recent development in found...</td>
<td>中文关键词:,人工智能,智能科技,平行智能,基础模型,数字科学家,平行科技,分布式自主科学</td>
<td>keywords:,AI,intelligent science,parallel inte...</td>
<td>基金项目:,澳门科学技术发展基金（0093/2023/RIA2），国家自然科学基金（6153...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="9c3a80a8" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>similar_df <span class="op">=</span> pd.read_csv(similar_csv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="a3b16b94" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>similar_df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">url</th>
<th data-quarto-table-cell-role="th">similar</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>[]</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>['科研信息化发展态势和思考', '数据科学与计算智能：内涵、范式与机遇', '人工智能驱动...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>['人工智能驱动的科学研究新范式：从AI4S到智能科学', 'GPT技术变革对基础科学研究的...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>['信息化:从计算机科学到计算科学', '科学大数据智能分析软件的现状与趋势', '中国高通...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>['人工智能驱动的科学研究新范式：从AI4S到智能科学', '适度超前推动科研基础平台建设 ...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="a7b7ab5c" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.merge(df, similar_df, on<span class="op">=</span><span class="st">'url'</span>, how<span class="op">=</span><span class="st">'left'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="e760e33c" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">url</th>
<th data-quarto-table-cell-role="th">date</th>
<th data-quarto-table-cell-role="th">views</th>
<th data-quarto-table-cell-role="th">downloads</th>
<th data-quarto-table-cell-role="th">author_cn</th>
<th data-quarto-table-cell-role="th">author_en</th>
<th data-quarto-table-cell-role="th">title_cn</th>
<th data-quarto-table-cell-role="th">title_en</th>
<th data-quarto-table-cell-role="th">org_cn</th>
<th data-quarto-table-cell-role="th">org_en</th>
<th data-quarto-table-cell-role="th">abstract_cn</th>
<th data-quarto-table-cell-role="th">abstract_en</th>
<th data-quarto-table-cell-role="th">keywords_cn</th>
<th data-quarto-table-cell-role="th">keywords_en</th>
<th data-quarto-table-cell-role="th">fund_project</th>
<th data-quarto-table-cell-role="th">similar</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>中国科学院院刊:2024,39(1):0-0</td>
<td>320</td>
<td>438</td>
<td>NaN</td>
<td>NaN</td>
<td>目录</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>中文摘要:</td>
<td>Abstract:</td>
<td>中文关键词:</td>
<td>keywords:</td>
<td>基金项目:</td>
<td>[]</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>中国科学院院刊:2024,39(1):1-9</td>
<td>975</td>
<td>998</td>
<td>李国杰</td>
<td>LI Guojie</td>
<td>智能化科研（AI4R）：第五科研范式</td>
<td>AI4R: The fifth scientific research paradigm</td>
<td>(中国科学院计算技术研究所 北京 100190)</td>
<td>(Institute of Computing Technology, Chinese Ac...</td>
<td>中文摘要:,文章将“智能化科研”（AI4R）称为第五科研范式，概括它的一系列特征包括：（1）...</td>
<td>Abstract:,This article refers to “AI for Resea...</td>
<td>中文关键词:,智能化科研,涌现,组合爆炸问题,非确定计算,大科学模型,科研大平台</td>
<td>keywords:,AI4R,emergence,combinatorial explosi...</td>
<td>基金项目:</td>
<td>['科研信息化发展态势和思考', '数据科学与计算智能：内涵、范式与机遇', '人工智能驱动...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>中国科学院院刊:2024,39(1):10-16</td>
<td>630</td>
<td>542</td>
<td>鄂维南,1,2</td>
<td>E Weinan,1,2</td>
<td>AI助力打造科学研究新范式</td>
<td>AI helps to establish a new paradigm for scien...</td>
<td>(1.北京大学 北京 100871;2.北京科学智能研究院 北京 100084)</td>
<td>(1.Perking University, Beijing 100871, China;2...</td>
<td>中文摘要:,科学研究的目的是发现基本原理和解决实际问题。尽管人类在发现基本原理和解决实际问题...</td>
<td>Abstract:,The main purpose of scientific resea...</td>
<td>中文关键词:,人工智能驱动的科学研究,科学计算,安卓模式</td>
<td>keywords:,scientific research driven by AI,sci...</td>
<td>基金项目:</td>
<td>['人工智能驱动的科学研究新范式：从AI4S到智能科学', 'GPT技术变革对基础科学研究的...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>中国科学院院刊:2024,39(1):17-26</td>
<td>470</td>
<td>448</td>
<td>谭光明,,,贾伟乐,,,王展,,,元国军,,,邵恩,,,孙凝晖*</td>
<td>TAN Guangming,,,JIA Weile,,,WANG Zhan,,,YUAN G...</td>
<td>面向模拟智能的计算系统</td>
<td>Computing system for simulation intelligence</td>
<td>(中国科学院计算技术研究所 北京 100190)</td>
<td>(Institute of Computing Technology, Chinese Ac...</td>
<td>中文摘要:,科学研究中的计算机模拟称为科学模拟（scientific simulation）...</td>
<td>Abstract:,This study refers computer simulatio...</td>
<td>中文关键词:,科学模拟,模拟智能,人工智能,计算系统,Z级计算</td>
<td>keywords:,scientific simulation,simulation int...</td>
<td>基金项目:,国家杰出青年科学基金（T2125013）</td>
<td>['信息化:从计算机科学到计算科学', '科学大数据智能分析软件的现状与趋势', '中国高通...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>中国科学院院刊:2024,39(1):27-33</td>
<td>579</td>
<td>632</td>
<td>王飞跃,1,2,,,王雨桐,1,3</td>
<td>WANG Fei-Yue,1,2,,,WANG Yutong,1,3</td>
<td>数字科学家与平行科学：AI4S和S4AI的本源与目标</td>
<td>Digital scientists and parallel sciences: The ...</td>
<td>(1.中国科学院自动化研究所 复杂系统管理与控制国家重点实验室 北京 100190;2.澳门...</td>
<td>(1.State Key Laboratory for Management and Con...</td>
<td>中文摘要:,围绕人工智能（AI）大模型技术的最新进展，从AI4S （人工智能驱动的科学研究）...</td>
<td>Abstract:,Based on recent development in found...</td>
<td>中文关键词:,人工智能,智能科技,平行智能,基础模型,数字科学家,平行科技,分布式自主科学</td>
<td>keywords:,AI,intelligent science,parallel inte...</td>
<td>基金项目:,澳门科学技术发展基金（0093/2023/RIA2），国家自然科学基金（6153...</td>
<td>['人工智能驱动的科学研究新范式：从AI4S到智能科学', '适度超前推动科研基础平台建设 ...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="data-cleaning" class="level1">
<h1>Data Cleaning</h1>
<p>The data we got is quite messy with lots of missing values, extra comas and other punctuation signs, some columns can be split into two to make more sense.</p>
<p>In this cases we can do some cleaning with Pandas and regular expressions.</p>
<div id="82e154b6" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>dataset_fixed <span class="op">=</span> <span class="st">"data/bcas_dataset_fixed.csv"</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(dataset_fixed, sep<span class="op">=</span><span class="st">'|'</span>)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>similar_csv <span class="op">=</span> <span class="st">'data/bcas_similar.csv'</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>similar_df <span class="op">=</span> pd.read_csv(similar_csv)</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.merge(df, similar_df, on<span class="op">=</span><span class="st">'url'</span>, how<span class="op">=</span><span class="st">'left'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="date-issue" class="level2">
<h2 class="anchored" data-anchor-id="date-issue">Date &amp; Issue</h2>
<p>First, we should transform strings like this ‘2024,39(1):0-0’ into more meaningful form.</p>
<p>This string contains three features – year, issue, and pages. The pattern for separating these features is consistent throughout the dataset, so by a simple split by coma and colon we can create columns ‘date’, ‘issue’, and ‘pages’.</p>
<div id="3f249fd3" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 中国科学院院刊:2024,39(1):0-0</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> regex <span class="im">as</span> re</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'date'</span>] <span class="op">=</span> df[<span class="st">'date'</span>].<span class="bu">str</span>.replace(<span class="st">'中国科学院院刊:'</span>, <span class="st">''</span>, regex<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="98b04ae7" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">url</th>
<th data-quarto-table-cell-role="th">date</th>
<th data-quarto-table-cell-role="th">views</th>
<th data-quarto-table-cell-role="th">downloads</th>
<th data-quarto-table-cell-role="th">author_cn</th>
<th data-quarto-table-cell-role="th">author_en</th>
<th data-quarto-table-cell-role="th">title_cn</th>
<th data-quarto-table-cell-role="th">title_en</th>
<th data-quarto-table-cell-role="th">org_cn</th>
<th data-quarto-table-cell-role="th">org_en</th>
<th data-quarto-table-cell-role="th">abstract_cn</th>
<th data-quarto-table-cell-role="th">abstract_en</th>
<th data-quarto-table-cell-role="th">keywords_cn</th>
<th data-quarto-table-cell-role="th">keywords_en</th>
<th data-quarto-table-cell-role="th">fund_project</th>
<th data-quarto-table-cell-role="th">similar</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>2024,39(1):0-0</td>
<td>320</td>
<td>438</td>
<td>NaN</td>
<td>NaN</td>
<td>目录</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>中文摘要:</td>
<td>Abstract:</td>
<td>中文关键词:</td>
<td>keywords:</td>
<td>基金项目:</td>
<td>[]</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="d507059f" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">'date'</span>, <span class="st">'issue'</span>]] <span class="op">=</span> df[<span class="st">'date'</span>].<span class="bu">str</span>.split(<span class="st">','</span>, n<span class="op">=</span><span class="dv">1</span>, expand<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="ca181798" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">url</th>
<th data-quarto-table-cell-role="th">date</th>
<th data-quarto-table-cell-role="th">views</th>
<th data-quarto-table-cell-role="th">downloads</th>
<th data-quarto-table-cell-role="th">author_cn</th>
<th data-quarto-table-cell-role="th">author_en</th>
<th data-quarto-table-cell-role="th">title_cn</th>
<th data-quarto-table-cell-role="th">title_en</th>
<th data-quarto-table-cell-role="th">org_cn</th>
<th data-quarto-table-cell-role="th">org_en</th>
<th data-quarto-table-cell-role="th">abstract_cn</th>
<th data-quarto-table-cell-role="th">abstract_en</th>
<th data-quarto-table-cell-role="th">keywords_cn</th>
<th data-quarto-table-cell-role="th">keywords_en</th>
<th data-quarto-table-cell-role="th">fund_project</th>
<th data-quarto-table-cell-role="th">similar</th>
<th data-quarto-table-cell-role="th">issue</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>2024</td>
<td>320</td>
<td>438</td>
<td>NaN</td>
<td>NaN</td>
<td>目录</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>中文摘要:</td>
<td>Abstract:</td>
<td>中文关键词:</td>
<td>keywords:</td>
<td>基金项目:</td>
<td>[]</td>
<td>39(1):0-0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>2024</td>
<td>975</td>
<td>998</td>
<td>李国杰</td>
<td>LI Guojie</td>
<td>智能化科研（AI4R）：第五科研范式</td>
<td>AI4R: The fifth scientific research paradigm</td>
<td>(中国科学院计算技术研究所 北京 100190)</td>
<td>(Institute of Computing Technology, Chinese Ac...</td>
<td>中文摘要:,文章将“智能化科研”（AI4R）称为第五科研范式，概括它的一系列特征包括：（1）...</td>
<td>Abstract:,This article refers to “AI for Resea...</td>
<td>中文关键词:,智能化科研,涌现,组合爆炸问题,非确定计算,大科学模型,科研大平台</td>
<td>keywords:,AI4R,emergence,combinatorial explosi...</td>
<td>基金项目:</td>
<td>['科研信息化发展态势和思考', '数据科学与计算智能：内涵、范式与机遇', '人工智能驱动...</td>
<td>39(1):1-9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>2024</td>
<td>630</td>
<td>542</td>
<td>鄂维南,1,2</td>
<td>E Weinan,1,2</td>
<td>AI助力打造科学研究新范式</td>
<td>AI helps to establish a new paradigm for scien...</td>
<td>(1.北京大学 北京 100871;2.北京科学智能研究院 北京 100084)</td>
<td>(1.Perking University, Beijing 100871, China;2...</td>
<td>中文摘要:,科学研究的目的是发现基本原理和解决实际问题。尽管人类在发现基本原理和解决实际问题...</td>
<td>Abstract:,The main purpose of scientific resea...</td>
<td>中文关键词:,人工智能驱动的科学研究,科学计算,安卓模式</td>
<td>keywords:,scientific research driven by AI,sci...</td>
<td>基金项目:</td>
<td>['人工智能驱动的科学研究新范式：从AI4S到智能科学', 'GPT技术变革对基础科学研究的...</td>
<td>39(1):10-16</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>2024</td>
<td>470</td>
<td>448</td>
<td>谭光明,,,贾伟乐,,,王展,,,元国军,,,邵恩,,,孙凝晖*</td>
<td>TAN Guangming,,,JIA Weile,,,WANG Zhan,,,YUAN G...</td>
<td>面向模拟智能的计算系统</td>
<td>Computing system for simulation intelligence</td>
<td>(中国科学院计算技术研究所 北京 100190)</td>
<td>(Institute of Computing Technology, Chinese Ac...</td>
<td>中文摘要:,科学研究中的计算机模拟称为科学模拟（scientific simulation）...</td>
<td>Abstract:,This study refers computer simulatio...</td>
<td>中文关键词:,科学模拟,模拟智能,人工智能,计算系统,Z级计算</td>
<td>keywords:,scientific simulation,simulation int...</td>
<td>基金项目:,国家杰出青年科学基金（T2125013）</td>
<td>['信息化:从计算机科学到计算科学', '科学大数据智能分析软件的现状与趋势', '中国高通...</td>
<td>39(1):17-26</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>2024</td>
<td>579</td>
<td>632</td>
<td>王飞跃,1,2,,,王雨桐,1,3</td>
<td>WANG Fei-Yue,1,2,,,WANG Yutong,1,3</td>
<td>数字科学家与平行科学：AI4S和S4AI的本源与目标</td>
<td>Digital scientists and parallel sciences: The ...</td>
<td>(1.中国科学院自动化研究所 复杂系统管理与控制国家重点实验室 北京 100190;2.澳门...</td>
<td>(1.State Key Laboratory for Management and Con...</td>
<td>中文摘要:,围绕人工智能（AI）大模型技术的最新进展，从AI4S （人工智能驱动的科学研究）...</td>
<td>Abstract:,Based on recent development in found...</td>
<td>中文关键词:,人工智能,智能科技,平行智能,基础模型,数字科学家,平行科技,分布式自主科学</td>
<td>keywords:,AI,intelligent science,parallel inte...</td>
<td>基金项目:,澳门科学技术发展基金（0093/2023/RIA2），国家自然科学基金（6153...</td>
<td>['人工智能驱动的科学研究新范式：从AI4S到智能科学', '适度超前推动科研基础平台建设 ...</td>
<td>39(1):27-33</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="06e3507b" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">'issue'</span>, <span class="st">'page'</span>]] <span class="op">=</span> df[<span class="st">'issue'</span>].<span class="bu">str</span>.split(<span class="st">':'</span>, n<span class="op">=</span><span class="dv">1</span>, expand<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="d574d419" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.rename(columns<span class="op">=</span>{<span class="st">'date'</span>:<span class="st">'year'</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="5cbc4529" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">url</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">views</th>
<th data-quarto-table-cell-role="th">downloads</th>
<th data-quarto-table-cell-role="th">author_cn</th>
<th data-quarto-table-cell-role="th">author_en</th>
<th data-quarto-table-cell-role="th">title_cn</th>
<th data-quarto-table-cell-role="th">title_en</th>
<th data-quarto-table-cell-role="th">org_cn</th>
<th data-quarto-table-cell-role="th">org_en</th>
<th data-quarto-table-cell-role="th">abstract_cn</th>
<th data-quarto-table-cell-role="th">abstract_en</th>
<th data-quarto-table-cell-role="th">keywords_cn</th>
<th data-quarto-table-cell-role="th">keywords_en</th>
<th data-quarto-table-cell-role="th">fund_project</th>
<th data-quarto-table-cell-role="th">similar</th>
<th data-quarto-table-cell-role="th">issue</th>
<th data-quarto-table-cell-role="th">page</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>2024</td>
<td>320</td>
<td>438</td>
<td>not_specified</td>
<td>not_specified</td>
<td>目录</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>中文摘要:</td>
<td>Abstract:</td>
<td>中文关键词:</td>
<td>keywords:</td>
<td>基金项目:</td>
<td>[]</td>
<td>39(1)</td>
<td>0-0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>2024</td>
<td>975</td>
<td>998</td>
<td>李国杰</td>
<td>LI Guojie</td>
<td>智能化科研（AI4R）：第五科研范式</td>
<td>AI4R: The fifth scientific research paradigm</td>
<td>(中国科学院计算技术研究所 北京 100190)</td>
<td>(Institute of Computing Technology, Chinese Ac...</td>
<td>中文摘要:,文章将“智能化科研”（AI4R）称为第五科研范式，概括它的一系列特征包括：（1）...</td>
<td>Abstract:,This article refers to “AI for Resea...</td>
<td>中文关键词:,智能化科研,涌现,组合爆炸问题,非确定计算,大科学模型,科研大平台</td>
<td>keywords:,AI4R,emergence,combinatorial explosi...</td>
<td>基金项目:</td>
<td>['科研信息化发展态势和思考', '数据科学与计算智能：内涵、范式与机遇', '人工智能驱动...</td>
<td>39(1)</td>
<td>1-9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>2024</td>
<td>630</td>
<td>542</td>
<td>鄂维南</td>
<td>E Weinan</td>
<td>AI助力打造科学研究新范式</td>
<td>AI helps to establish a new paradigm for scien...</td>
<td>(1.北京大学 北京 100871;2.北京科学智能研究院 北京 100084)</td>
<td>(1.Perking University, Beijing 100871, China;2...</td>
<td>中文摘要:,科学研究的目的是发现基本原理和解决实际问题。尽管人类在发现基本原理和解决实际问题...</td>
<td>Abstract:,The main purpose of scientific resea...</td>
<td>中文关键词:,人工智能驱动的科学研究,科学计算,安卓模式</td>
<td>keywords:,scientific research driven by AI,sci...</td>
<td>基金项目:</td>
<td>['人工智能驱动的科学研究新范式：从AI4S到智能科学', 'GPT技术变革对基础科学研究的...</td>
<td>39(1)</td>
<td>10-16</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>2024</td>
<td>470</td>
<td>448</td>
<td>谭光明,贾伟乐,王展,元国军,邵恩,孙凝晖</td>
<td>TAN Guangming,JIA Weile,WANG Zhan,YUAN Guojun,...</td>
<td>面向模拟智能的计算系统</td>
<td>Computing system for simulation intelligence</td>
<td>(中国科学院计算技术研究所 北京 100190)</td>
<td>(Institute of Computing Technology, Chinese Ac...</td>
<td>中文摘要:,科学研究中的计算机模拟称为科学模拟（scientific simulation）...</td>
<td>Abstract:,This study refers computer simulatio...</td>
<td>中文关键词:,科学模拟,模拟智能,人工智能,计算系统,Z级计算</td>
<td>keywords:,scientific simulation,simulation int...</td>
<td>基金项目:,国家杰出青年科学基金（T2125013）</td>
<td>['信息化:从计算机科学到计算科学', '科学大数据智能分析软件的现状与趋势', '中国高通...</td>
<td>39(1)</td>
<td>17-26</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>2024</td>
<td>579</td>
<td>632</td>
<td>王飞跃,王雨桐</td>
<td>WANG Fei-Yue,WANG Yutong</td>
<td>数字科学家与平行科学：AI4S和S4AI的本源与目标</td>
<td>Digital scientists and parallel sciences: The ...</td>
<td>(1.中国科学院自动化研究所 复杂系统管理与控制国家重点实验室 北京 100190;2.澳门...</td>
<td>(1.State Key Laboratory for Management and Con...</td>
<td>中文摘要:,围绕人工智能（AI）大模型技术的最新进展，从AI4S （人工智能驱动的科学研究）...</td>
<td>Abstract:,Based on recent development in found...</td>
<td>中文关键词:,人工智能,智能科技,平行智能,基础模型,数字科学家,平行科技,分布式自主科学</td>
<td>keywords:,AI,intelligent science,parallel inte...</td>
<td>基金项目:,澳门科学技术发展基金（0093/2023/RIA2），国家自然科学基金（6153...</td>
<td>['人工智能驱动的科学研究新范式：从AI4S到智能科学', '适度超前推动科研基础平台建设 ...</td>
<td>39(1)</td>
<td>27-33</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</section>
<section id="abstracts-keywords" class="level2">
<h2 class="anchored" data-anchor-id="abstracts-keywords">Abstracts &amp; Keywords</h2>
<p>Next we can remove irrelevant words like ‘中文摘要:’, ‘Abstract:’, ‘中文关键词:’, ‘keywords:’, ‘基金项目:’. This can be done through regular expression replacement.</p>
<div id="f8d7b9dc" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove redundant text and strip comas</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'abstract_cn'</span>] <span class="op">=</span> df[<span class="st">'abstract_cn'</span>].<span class="bu">str</span>.replace(</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'中文摘要:'</span>, <span class="st">''</span>, regex<span class="op">=</span><span class="va">True</span>).<span class="bu">str</span>.lstrip(<span class="st">','</span>)</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'abstract_en'</span>] <span class="op">=</span> df[<span class="st">'abstract_en'</span>].<span class="bu">str</span>.replace(</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Abstract:'</span>, <span class="st">''</span>, regex<span class="op">=</span><span class="va">True</span>).<span class="bu">str</span>.lstrip(<span class="st">','</span>)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'keywords_cn'</span>] <span class="op">=</span> df[<span class="st">'keywords_cn'</span>].<span class="bu">str</span>.replace(</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'中文关键词:'</span>, <span class="st">''</span>, regex<span class="op">=</span><span class="va">True</span>).<span class="bu">str</span>.lstrip(<span class="st">','</span>)</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'keywords_en'</span>] <span class="op">=</span> df[<span class="st">'keywords_en'</span>].<span class="bu">str</span>.replace(</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'keywords:'</span>, <span class="st">''</span>, regex<span class="op">=</span><span class="va">True</span>).<span class="bu">str</span>.lstrip(<span class="st">','</span>)</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'fund_project'</span>] <span class="op">=</span> df[<span class="st">'fund_project'</span>].<span class="bu">str</span>.replace(</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'基金项目:'</span>, <span class="st">''</span>, regex<span class="op">=</span><span class="va">True</span>).<span class="bu">str</span>.lstrip(<span class="st">','</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="084792b2" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">url</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">views</th>
<th data-quarto-table-cell-role="th">downloads</th>
<th data-quarto-table-cell-role="th">author_cn</th>
<th data-quarto-table-cell-role="th">author_en</th>
<th data-quarto-table-cell-role="th">title_cn</th>
<th data-quarto-table-cell-role="th">title_en</th>
<th data-quarto-table-cell-role="th">org_cn</th>
<th data-quarto-table-cell-role="th">org_en</th>
<th data-quarto-table-cell-role="th">abstract_cn</th>
<th data-quarto-table-cell-role="th">abstract_en</th>
<th data-quarto-table-cell-role="th">keywords_cn</th>
<th data-quarto-table-cell-role="th">keywords_en</th>
<th data-quarto-table-cell-role="th">fund_project</th>
<th data-quarto-table-cell-role="th">similar</th>
<th data-quarto-table-cell-role="th">issue</th>
<th data-quarto-table-cell-role="th">page</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>2024</td>
<td>320</td>
<td>438</td>
<td>not_specified</td>
<td>not_specified</td>
<td>目录</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>[]</td>
<td>39(1)</td>
<td>0-0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>2024</td>
<td>975</td>
<td>998</td>
<td>李国杰</td>
<td>LI Guojie</td>
<td>智能化科研（AI4R）：第五科研范式</td>
<td>AI4R: The fifth scientific research paradigm</td>
<td>(中国科学院计算技术研究所 北京 100190)</td>
<td>(Institute of Computing Technology, Chinese Ac...</td>
<td>文章将“智能化科研”（AI4R）称为第五科研范式，概括它的一系列特征包括：（1）人工智能（A...</td>
<td>This article refers to “AI for Research（AI4R）”...</td>
<td>智能化科研,涌现,组合爆炸问题,非确定计算,大科学模型,科研大平台</td>
<td>AI4R,emergence,combinatorial explosion problem...</td>
<td></td>
<td>['科研信息化发展态势和思考', '数据科学与计算智能：内涵、范式与机遇', '人工智能驱动...</td>
<td>39(1)</td>
<td>1-9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>2024</td>
<td>630</td>
<td>542</td>
<td>鄂维南</td>
<td>E Weinan</td>
<td>AI助力打造科学研究新范式</td>
<td>AI helps to establish a new paradigm for scien...</td>
<td>(1.北京大学 北京 100871;2.北京科学智能研究院 北京 100084)</td>
<td>(1.Perking University, Beijing 100871, China;2...</td>
<td>科学研究的目的是发现基本原理和解决实际问题。尽管人类在发现基本原理和解决实际问题上已经取得了...</td>
<td>The main purpose of scientific research is to ...</td>
<td>人工智能驱动的科学研究,科学计算,安卓模式</td>
<td>scientific research driven by AI,scientific co...</td>
<td></td>
<td>['人工智能驱动的科学研究新范式：从AI4S到智能科学', 'GPT技术变革对基础科学研究的...</td>
<td>39(1)</td>
<td>10-16</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>2024</td>
<td>470</td>
<td>448</td>
<td>谭光明,贾伟乐,王展,元国军,邵恩,孙凝晖</td>
<td>TAN Guangming,JIA Weile,WANG Zhan,YUAN Guojun,...</td>
<td>面向模拟智能的计算系统</td>
<td>Computing system for simulation intelligence</td>
<td>(中国科学院计算技术研究所 北京 100190)</td>
<td>(Institute of Computing Technology, Chinese Ac...</td>
<td>科学研究中的计算机模拟称为科学模拟（scientific simulation），文章从其狭...</td>
<td>This study refers computer simulation in scien...</td>
<td>科学模拟,模拟智能,人工智能,计算系统,Z级计算</td>
<td>scientific simulation,simulation intelligence,...</td>
<td>国家杰出青年科学基金（T2125013）</td>
<td>['信息化:从计算机科学到计算科学', '科学大数据智能分析软件的现状与趋势', '中国高通...</td>
<td>39(1)</td>
<td>17-26</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>2024</td>
<td>579</td>
<td>632</td>
<td>王飞跃,王雨桐</td>
<td>WANG Fei-Yue,WANG Yutong</td>
<td>数字科学家与平行科学：AI4S和S4AI的本源与目标</td>
<td>Digital scientists and parallel sciences: The ...</td>
<td>(1.中国科学院自动化研究所 复杂系统管理与控制国家重点实验室 北京 100190;2.澳门...</td>
<td>(1.State Key Laboratory for Management and Con...</td>
<td>围绕人工智能（AI）大模型技术的最新进展，从AI4S （人工智能驱动的科学研究）到S4AI ...</td>
<td>Based on recent development in foundation mode...</td>
<td>人工智能,智能科技,平行智能,基础模型,数字科学家,平行科技,分布式自主科学</td>
<td>AI,intelligent science,parallel intelligence,f...</td>
<td>澳门科学技术发展基金（0093/2023/RIA2），国家自然科学基金（61533019）</td>
<td>['人工智能驱动的科学研究新范式：从AI4S到智能科学', '适度超前推动科研基础平台建设 ...</td>
<td>39(1)</td>
<td>27-33</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</section>
<section id="authors" class="level2">
<h2 class="anchored" data-anchor-id="authors">Authors</h2>
<p>We need to clean the author column as well and remove extra columns, numbers and other symbols like “*“.</p>
<div id="849ee768" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> normalize_text(text):</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># remove numbers</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> re.sub(<span class="vs">r'\d+'</span>, <span class="st">''</span>, text)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># replace multiple commas with one</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> re.sub(<span class="vs">r',+'</span>, <span class="st">','</span>, text)</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># remove asterisks</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> re.sub(<span class="vs">r'\*'</span>, <span class="st">''</span>, text)</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># remove any leading or trailing commas and whitespace</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> text.strip(<span class="st">','</span>).strip()</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> text</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="5c950a3a" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'author_en'</span>] <span class="op">=</span> df[<span class="st">'author_en'</span>].fillna(<span class="st">'not_specified'</span>)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'author_en'</span>] <span class="op">=</span> df[<span class="st">'author_en'</span>].<span class="bu">apply</span>(normalize_text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="6944a9e3" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># some articles do not have a specified name of the author</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co"># but each publication is written by a person, so instead of NaN we fill missing values with "not_specified" text</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'author_cn'</span>] <span class="op">=</span> df[<span class="st">'author_cn'</span>].fillna(<span class="st">'not_specified'</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'author_cn'</span>] <span class="op">=</span> df[<span class="st">'author_cn'</span>].<span class="bu">apply</span>(normalize_text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="977ae106" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'author_cn'</span>].head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<pre><code>0            not_specified
1                      李国杰
2                      鄂维南
3    谭光明,贾伟乐,王展,元国军,邵恩,孙凝晖
4                  王飞跃,王雨桐
Name: author_cn, dtype: object</code></pre>
</div>
</div>
<div id="f8119c70" class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>authors.to_csv(<span class="st">'data/authors_flat.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="organizations" class="level2">
<h2 class="anchored" data-anchor-id="organizations">Organizations</h2>
<p>Cleaning organization data is a tricky part, beacuse this part is the most inconsistent and messy. Example of the organization description: (1.北京大学 北京 100871;2.北京科学智能研究院 北京 100084). One articles can be written by several people from different instituitions. The affiliation info also includes data about city, postal codes and job titles in a lot of cases.</p>
<div id="a85e87d2" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>orgs <span class="op">=</span> df[[<span class="st">'url'</span>, <span class="st">'org_cn'</span>]].dropna()</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace '!' with a space and split 'org_cn' on ';'</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>orgs[<span class="st">'org_cn'</span>] <span class="op">=</span> orgs[<span class="st">'org_cn'</span>].<span class="bu">str</span>.replace(</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'!'</span>, <span class="st">' '</span>, regex<span class="op">=</span><span class="va">True</span>).<span class="bu">str</span>.split(<span class="st">';'</span>)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Explode the DataFrame and strip whitespace and parentheses</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>orgs_expld <span class="op">=</span> orgs.explode(<span class="st">'org_cn'</span>)</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'org_cn'</span>] <span class="op">=</span> orgs_expld[<span class="st">'org_cn'</span>].<span class="bu">str</span>.strip().<span class="bu">str</span>.strip(<span class="st">'()'</span>)</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove sequences of digits (4 to 8 digits long) at the end and strip again</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'org_cn'</span>] <span class="op">=</span> orgs_expld[<span class="st">'org_cn'</span>].<span class="bu">str</span>.replace(</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>    <span class="vs">r'\s*\d{4,8}\s*$'</span>, <span class="st">' '</span>, regex<span class="op">=</span><span class="va">True</span>).<span class="bu">str</span>.strip()</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove leading sequences of digits with optional decimals and trailing spaces or commas</span></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Also remove digits and spaces or commas at any position and leading non-Chinese text followed by a space</span></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'org_cn'</span>] <span class="op">=</span> orgs_expld[<span class="st">'org_cn'</span>].<span class="bu">str</span>.replace(</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>    <span class="vs">r'^\d+\.\d*[\s,]*|\d+[\s,]*|^.+?\s+'</span>, <span class="st">''</span>, regex<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We don’t need the postal codes and job titles for our research, but the city data can be useful for geospatial analysis.</p>
<p>We can get the relevant cities by checking what city from the list of Chinese cities (get it from Baidu) appears in the string.</p>
<div id="033e1a15" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>city_df <span class="op">=</span> pd.read_csv(<span class="st">'data/cities.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="240821fa" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a regex from the city list</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>cities_list <span class="op">=</span> city_df[<span class="st">'city_cn'</span>].tolist()</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>cities_pattern <span class="op">=</span> <span class="vs">r'\s*(?&lt;=)(\s*'</span> <span class="op">+</span> <span class="op">\</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'|'</span>.join(<span class="bu">map</span>(re.escape, cities_list)) <span class="op">+</span> <span class="vs">r')\b'</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="co"># compile the regex pattern</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>city_regex <span class="op">=</span> re.<span class="bu">compile</span>(cities_pattern)</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="co"># extract the city from a string</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> extract_city(text):</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>    match <span class="op">=</span> city_regex.search(text)</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> match:</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> match.group(<span class="dv">0</span>)  <span class="co"># get the match</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'city_cn'</span>] <span class="op">=</span> orgs_expld[<span class="st">'org_cn'</span>].<span class="bu">apply</span>(extract_city)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="4a07f53b" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'city_cn'</span>] <span class="op">=</span> orgs_expld[<span class="st">'org_cn'</span>].<span class="bu">apply</span>(extract_city)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'city_cn'</span>] <span class="op">=</span> orgs_expld[<span class="st">'city_cn'</span>].<span class="bu">str</span>.strip()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="f8a76735" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>mapping_dict <span class="op">=</span> <span class="bu">dict</span>(<span class="bu">zip</span>(city_df[<span class="st">'city_cn'</span>], city_df[<span class="st">'city_en'</span>]))</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'city_en'</span>] <span class="op">=</span> orgs_expld[<span class="st">'city_cn'</span>].<span class="bu">map</span>(mapping_dict)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="606a6973" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'org_cn'</span>] <span class="op">=</span> orgs_expld[<span class="st">'org_cn'</span>].<span class="bu">apply</span>(</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">lambda</span> x: city_regex.sub(<span class="st">''</span>, x).strip())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next we need to remove the job titles from the strings.</p>
<p>For this purpose we can create a list of job titles which appear in the dataset.</p>
<div id="e114d0b4" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>job_titles <span class="op">=</span> [</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"所长"</span>, <span class="st">"研究员"</span>,</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"院长"</span>, <span class="st">"校长"</span>,</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"主席"</span>, <span class="st">"总经理"</span>,</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"教授"</span>, <span class="st">"院士"</span>,</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"博士"</span>, <span class="st">"学部委员"</span>,</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"委员长"</span>, <span class="st">"组长"</span>,</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"主任"</span>, <span class="st">"处长"</span>,</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"部长"</span>, <span class="st">"主任"</span>,</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"党委书记"</span>, <span class="st">"秘书"</span>,</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"局长"</span>, <span class="st">"总裁"</span>,</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"台长"</span>, <span class="st">"名誉"</span>,</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"特邀顾问"</span>, <span class="st">"执行"</span>,</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"主管"</span>, <span class="st">"工程师"</span>,</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"专利代理人"</span>, <span class="st">"导师"</span>,</span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"助理"</span>, <span class="st">"书记"</span>, <span class="st">"理事长"</span>, <span class="st">"馆长"</span></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>job_titles_pattern <span class="op">=</span> <span class="st">'|'</span>.join([<span class="vs">fr'\s*</span><span class="sc">{</span>title<span class="sc">}</span><span class="vs">\s*'</span> <span class="cf">for</span> title <span class="kw">in</span> job_titles])</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> remove_job_titles(text):</span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> re.sub(job_titles_pattern, <span class="st">''</span>, text).strip()</span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'org_cn'</span>] <span class="op">=</span> orgs_expld[<span class="st">'org_cn'</span>].<span class="bu">apply</span>(remove_job_titles)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="3b25bdb0" class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace all occurrences of the characters in the pattern with an empty string</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'org_cn'</span>] <span class="op">=</span> orgs_expld[<span class="st">'org_cn'</span>].<span class="bu">str</span>.replace(</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>    <span class="vs">r"[、《》副]"</span>, <span class="st">""</span>, regex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove empty parentheses</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'org_cn'</span>] <span class="op">=</span> orgs_expld[<span class="st">'org_cn'</span>].<span class="bu">str</span>.replace(</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>    <span class="vs">r"\(\)"</span>, <span class="st">""</span>, regex<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="6f5199ec" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>orgs_expld <span class="op">=</span> orgs_expld[orgs_expld.org_cn <span class="op">!=</span> <span class="st">''</span>]</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>orgs_expld.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="52">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">url</th>
<th data-quarto-table-cell-role="th">org_cn</th>
<th data-quarto-table-cell-role="th">city_cn</th>
<th data-quarto-table-cell-role="th">city_en</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>北京大学</td>
<td>北京</td>
<td>Beijing</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>北京科学智能研究院</td>
<td>北京</td>
<td>Beijing</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>中国科学院自动化研究所 复杂系统管理与控制国家重点实验室</td>
<td>北京</td>
<td>Beijing</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>澳门科技大学 创新工程学院</td>
<td>澳门</td>
<td>Macau</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>中国科学院自动化研究所 多模态人工智能系统全国重点实验室</td>
<td>北京</td>
<td>Beijing</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>The next important issue is the degree of detail about organizations we are interested in. The affiliation data includes in some cases the title of the head organization and a subdivision (lab, office, group, ). For now we will focus on the head organizations, e.g.&nbsp;if there is a string like ‘中国科学院自动化研究所 复杂系统管理与控制国家重点实验室’ we count it like ‘中国科学院自动化研究所’.</p>
<p>This also can be achieved through regular exprssions.</p>
<div id="9e24bdcc" class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List of head organizations</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>head_org_endings <span class="op">=</span> [<span class="st">"科学院"</span>, <span class="st">"研究所"</span>, <span class="st">"研究院"</span>, <span class="st">"大学"</span>, <span class="st">"学院"</span>]</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create regex</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>pattern <span class="op">=</span> <span class="st">'|'</span>.join(head_org_endings)</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Regex pattern to detect Chinese characters</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>chinese_char_pattern <span class="op">=</span> re.<span class="bu">compile</span>(<span class="vs">r'[\u4e00-\u9fff]'</span>)</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> extract_head_org(text):</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> text.strip():</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> text  <span class="co"># Return the original text if it is empty or only whitespace</span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Check if the text contains any Chinese characters</span></span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> chinese_char_pattern.search(text):</span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> text  <span class="co"># Return the original text if it contains no Chinese characters</span></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Check specifically for "中国科学院大学" ignoring other symbols or characters</span></span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> re.search(<span class="vs">r"中国科学院大学"</span>, text):</span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"中国科学院大学"</span></span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-23"><a href="#cb50-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">"中国科学院院刊"</span> <span class="kw">in</span> text:</span>
<span id="cb50-24"><a href="#cb50-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"中国科学院院刊"</span></span>
<span id="cb50-25"><a href="#cb50-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-26"><a href="#cb50-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">"上海天文台"</span> <span class="kw">in</span> text:</span>
<span id="cb50-27"><a href="#cb50-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"中国科学院上海天文台"</span></span>
<span id="cb50-28"><a href="#cb50-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-29"><a href="#cb50-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">"北京天文台"</span> <span class="kw">in</span> text:</span>
<span id="cb50-30"><a href="#cb50-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"中国科学院北京天文台"</span></span>
<span id="cb50-31"><a href="#cb50-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-32"><a href="#cb50-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">"南京天文台"</span> <span class="kw">in</span> text:</span>
<span id="cb50-33"><a href="#cb50-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"中国科学院南京天文台"</span></span>
<span id="cb50-34"><a href="#cb50-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-35"><a href="#cb50-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">"国家天文台"</span> <span class="kw">in</span> text:</span>
<span id="cb50-36"><a href="#cb50-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"中国科学院国家天文台"</span></span>
<span id="cb50-37"><a href="#cb50-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-38"><a href="#cb50-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Special case for "中国科学院" followed by "研究所", "中心", or "研究院"</span></span>
<span id="cb50-39"><a href="#cb50-39" aria-hidden="true" tabindex="-1"></a>    zky_with_suffix_match <span class="op">=</span> re.search(<span class="vs">r"(中国科学院.*?(研究所|中心|研究院))"</span>, text)</span>
<span id="cb50-40"><a href="#cb50-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> zky_with_suffix_match:</span>
<span id="cb50-41"><a href="#cb50-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> zky_with_suffix_match.group(<span class="dv">1</span>)</span>
<span id="cb50-42"><a href="#cb50-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-43"><a href="#cb50-43" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Search for the first occurrence of any of the common endings in the full text</span></span>
<span id="cb50-44"><a href="#cb50-44" aria-hidden="true" tabindex="-1"></a>    match <span class="op">=</span> re.search(<span class="vs">fr"(.+?(</span><span class="sc">{</span>pattern<span class="sc">}</span><span class="vs">))"</span>, text)</span>
<span id="cb50-45"><a href="#cb50-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> match:</span>
<span id="cb50-46"><a href="#cb50-46" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Extract and return the head organization</span></span>
<span id="cb50-47"><a href="#cb50-47" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> match.group(<span class="dv">1</span>)</span>
<span id="cb50-48"><a href="#cb50-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb50-49"><a href="#cb50-49" aria-hidden="true" tabindex="-1"></a>        <span class="co"># No common ending found, consider the first part as the head organization</span></span>
<span id="cb50-50"><a href="#cb50-50" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> text.split()[<span class="dv">0</span>] <span class="cf">if</span> <span class="st">' '</span> <span class="kw">in</span> text <span class="cf">else</span> text</span>
<span id="cb50-51"><a href="#cb50-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-52"><a href="#cb50-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-53"><a href="#cb50-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply the function to the DataFrame</span></span>
<span id="cb50-54"><a href="#cb50-54" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'org_cn_head'</span>] <span class="op">=</span> orgs_expld[<span class="st">'org_cn'</span>].<span class="bu">apply</span>(extract_head_org)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cdb115b5" class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>orgs_expld.org_cn_head.value_counts().reset_index().head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="54">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">org_cn_head</th>
<th data-quarto-table-cell-role="th">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>中国科学院</td>
<td>689</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>中国科学院大学</td>
<td>484</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>中国科学院科技战略咨询研究院</td>
<td>217</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>中国科学院地理科学与资源研究所</td>
<td>162</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>中国科学院科技政策与管理科学研究所</td>
<td>112</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>北京大学</td>
<td>72</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>中国科学院西北生态环境资源研究院</td>
<td>49</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>中国科学院数学与系统科学研究院</td>
<td>48</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>清华大学</td>
<td>43</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>中国科学院生态环境研究中心</td>
<td>38</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="fcd8107b" class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>orgs_head <span class="op">=</span> orgs_expld[<span class="st">'org_cn_head'</span>].unique()</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a df from the unique values and save for additional processing</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>orgs_head_df <span class="op">=</span> pd.DataFrame(orgs_head, columns<span class="op">=</span>[<span class="st">'org_cn_head'</span>])</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>orgs_head_df.to_csv(<span class="st">'data/orgs_head.csv'</span>, index<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="64414cb2" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>orgs_head_clean_df <span class="op">=</span> pd.read_csv(<span class="st">'data/orgs_head_clean.csv'</span>)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>orgs_head_clean_df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">org_cn_head</th>
<th data-quarto-table-cell-role="th">org_cn_head_clean</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>北京师范大学</td>
<td>北京师范大学</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>“万种园”项目首席科学家</td>
<td>“万种园”项目</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>“中国科学与人文论坛”长</td>
<td>中国科学与人文论坛</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>“论坛”处宣传</td>
<td>“论坛”处宣传</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>)中国科学院</td>
<td>中国科学院</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>The next step is to translate the data to English. Note that we need official English titles, so doing everything through machine translation is not the best fit.</p>
<p>We can try to retrieve some English titles from Baidu using Beautiful Soup again.</p>
<div id="b1e58b25" class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fetch_english_title(org_cn):</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>    base_url <span class="op">=</span> <span class="st">'https://baike.baidu.com/item/'</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>    url <span class="op">=</span> base_url <span class="op">+</span> org_cn</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Processing: </span><span class="sc">{</span>org_cn<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>        response <span class="op">=</span> requests.get(url)</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>        response.raise_for_status()</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>        soup <span class="op">=</span> BeautifulSoup(response.content, <span class="st">"html.parser"</span>)</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Locate the divs with class "itemWrapper_yPk3z" or "itemWrapper_qgaYJ"</span></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>        divs <span class="op">=</span> soup.find_all(</span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>            <span class="st">'div'</span>, class_<span class="op">=</span>[<span class="st">'itemWrapper_yPk3z'</span>, <span class="st">'itemWrapper_qgaYJ'</span>])</span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> div <span class="kw">in</span> divs:</span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Look for the dt element with the text "外文名"</span></span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>            dt <span class="op">=</span> div.find(<span class="st">'dt'</span>, class_<span class="op">=</span><span class="st">'basicInfoItem_hdTH0 itemName_iCg2R'</span>)</span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> dt <span class="kw">and</span> <span class="st">'外文名'</span> <span class="kw">in</span> dt.text:</span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Find the dd element with class "basicInfoItem_hdTH0 itemValue_rxziX"</span></span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>                dd <span class="op">=</span> div.find(</span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'dd'</span>, class_<span class="op">=</span><span class="st">'basicInfoItem_hdTH0 itemValue_rxziX'</span>)</span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> dd:</span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a>                    <span class="co"># Extract English title from the span element</span></span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a>                    span <span class="op">=</span> dd.find(<span class="st">'span'</span>, class_<span class="op">=</span><span class="st">'text_v1llE'</span>)</span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">if</span> span:</span>
<span id="cb54-24"><a href="#cb54-24" aria-hidden="true" tabindex="-1"></a>                        english_title <span class="op">=</span> span.text.strip()</span>
<span id="cb54-25"><a href="#cb54-25" aria-hidden="true" tabindex="-1"></a>                        <span class="bu">print</span>(</span>
<span id="cb54-26"><a href="#cb54-26" aria-hidden="true" tabindex="-1"></a>                            <span class="ss">f"Found English title for </span><span class="sc">{</span>org_cn<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>english_title<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb54-27"><a href="#cb54-27" aria-hidden="true" tabindex="-1"></a>                        <span class="cf">return</span> english_title</span>
<span id="cb54-28"><a href="#cb54-28" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"No English title found for </span><span class="sc">{</span>org_cn<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb54-29"><a href="#cb54-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb54-30"><a href="#cb54-30" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Error fetching data for </span><span class="sc">{</span>org_cn<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb54-31"><a href="#cb54-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb54-32"><a href="#cb54-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-33"><a href="#cb54-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-34"><a href="#cb54-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming orgs_head_clean_df is your DataFrame</span></span>
<span id="cb54-35"><a href="#cb54-35" aria-hidden="true" tabindex="-1"></a>orgs_head_clean_df[<span class="st">'org_cn_head_en'</span>] <span class="op">=</span> orgs_head_clean_df[<span class="st">'org_cn_head_clean'</span>].<span class="bu">apply</span>(</span>
<span id="cb54-36"><a href="#cb54-36" aria-hidden="true" tabindex="-1"></a>    fetch_english_title)</span>
<span id="cb54-37"><a href="#cb54-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-38"><a href="#cb54-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the DataFrame with English titles to a CSV file</span></span>
<span id="cb54-39"><a href="#cb54-39" aria-hidden="true" tabindex="-1"></a>orgs_head_clean_df.to_csv(<span class="st">'data/bcas_orgs_head_clean_en.csv'</span>, index<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Not all organizations are present on Baidu or have English translation. We can translate these with Google Translate through <code>deeptranslator</code>.</p>
<div id="a5401b0f" class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> deep_translator <span class="im">import</span> GoogleTranslator</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tqdm <span class="im">import</span> tqdm</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_translation(text):</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> GoogleTranslator(source<span class="op">=</span><span class="st">'auto'</span>, target<span class="op">=</span><span class="st">'en'</span>).translate(<span class="bu">str</span>(text))</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">KeyboardInterrupt</span> <span class="im">as</span> e:</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> e</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Error translating text: </span><span class="sc">{</span>text<span class="sc">}</span><span class="ss">. Error: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'error'</span></span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>tqdm.pandas()</span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply translation only to rows where 'org_cn_head_en' is null</span></span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a>orgs_head_clean_df.loc[orgs_head_clean_df[<span class="st">'org_cn_head_en'</span>].isnull(</span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a>), <span class="st">'org_cn_head_en'</span>] <span class="op">=</span> orgs_head_clean_df.loc[orgs_head_clean_df[<span class="st">'org_cn_head_en'</span>].isnull(), <span class="st">'org_cn_head_clean'</span>].progress_apply(get_translation)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>100%|██████████| 659/659 [19:41&lt;00:00,  1.79s/it]</code></pre>
</div>
</div>
<div id="f94dc376" class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>orgs_head_clean_df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1169">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">org_cn_head</th>
<th data-quarto-table-cell-role="th">org_cn_head_clean</th>
<th data-quarto-table-cell-role="th">org_cn_head_en</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>北京师范大学</td>
<td>北京师范大学</td>
<td>Beijing Normal University</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>“万种园”项目首席科学家</td>
<td>“万种园”项目</td>
<td>"Ten Thousand Plants Garden" Project</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>“中国科学与人文论坛”长</td>
<td>中国科学与人文论坛</td>
<td>China Science and Humanities Forum</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>“论坛”处宣传</td>
<td>“论坛”处宣传</td>
<td>Publicity at the Forum</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>)中国科学院</td>
<td>中国科学院</td>
<td>Chinese Academy of Sciences</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>Finally, we add some final text processing touches in Excel/Google Sheets and update the dataframe.</p>
<div id="953d853b" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>orgs_head_clean_df <span class="op">=</span> pd.read_csv(<span class="st">'data/bcas_orgs_head_clean_en_fin.csv'</span>)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>orgs_head_clean_df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">org_cn_head</th>
<th data-quarto-table-cell-role="th">org_cn_head_clean</th>
<th data-quarto-table-cell-role="th">org_cn_head_en</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>北京师范大学</td>
<td>北京师范大学</td>
<td>Beijing Normal University</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>“万种园”项目首席科学家</td>
<td>“万种园”项目</td>
<td>"Ten Thousand Plants Garden" Project</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>“中国科学与人文论坛”长</td>
<td>中国科学与人文论坛</td>
<td>China Science and Humanities Forum</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>“论坛”处宣传</td>
<td>“论坛”处宣传</td>
<td>Publicity at the Forum</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>)中国科学院</td>
<td>中国科学院</td>
<td>CAS</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="85105e05" class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>mapping_dict <span class="op">=</span> <span class="bu">dict</span>(</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">zip</span>(orgs_head_clean_df[<span class="st">'org_cn_head'</span>], orgs_head_clean_df[<span class="st">'org_cn_head_en'</span>]))</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'org_cn_head_en'</span>] <span class="op">=</span> orgs_expld[<span class="st">'org_cn_head'</span>].<span class="bu">map</span>(mapping_dict)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="84424003" class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>orgs_expld.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="60">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">url</th>
<th data-quarto-table-cell-role="th">org_cn</th>
<th data-quarto-table-cell-role="th">city_cn</th>
<th data-quarto-table-cell-role="th">city_en</th>
<th data-quarto-table-cell-role="th">org_cn_head</th>
<th data-quarto-table-cell-role="th">org_cn_head_en</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>北京大学</td>
<td>北京</td>
<td>Beijing</td>
<td>北京大学</td>
<td>Peking University</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>北京科学智能研究院</td>
<td>北京</td>
<td>Beijing</td>
<td>北京科学智能研究院</td>
<td>Beijing Institute of Scientific and Intelligen...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>中国科学院自动化研究所 复杂系统管理与控制国家重点实验室</td>
<td>北京</td>
<td>Beijing</td>
<td>中国科学院自动化研究所</td>
<td>Institute of Automation, CAS</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>澳门科技大学 创新工程学院</td>
<td>澳门</td>
<td>Macau</td>
<td>澳门科技大学</td>
<td>Macau University of Science and Technology</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>中国科学院自动化研究所 多模态人工智能系统全国重点实验室</td>
<td>北京</td>
<td>Beijing</td>
<td>中国科学院自动化研究所</td>
<td>Institute of Automation, CAS</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="aefa48e5" class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create mapping dictionaries for city_cn and city_en based on org_cn_head_en</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>city_cn_mapping <span class="op">=</span> orgs_expld.dropna(subset<span class="op">=</span>[<span class="st">'city_cn'</span>]).drop_duplicates(</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>    subset<span class="op">=</span>[<span class="st">'org_cn_head_en'</span>]).set_index(<span class="st">'org_cn_head_en'</span>)[<span class="st">'city_cn'</span>].to_dict()</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>city_en_mapping <span class="op">=</span> orgs_expld.dropna(subset<span class="op">=</span>[<span class="st">'city_en'</span>]).drop_duplicates(</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>    subset<span class="op">=</span>[<span class="st">'org_cn_head_en'</span>]).set_index(<span class="st">'org_cn_head_en'</span>)[<span class="st">'city_en'</span>].to_dict()</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Fill missing values using the mapping</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'city_cn'</span>] <span class="op">=</span> orgs_expld.<span class="bu">apply</span>(</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">lambda</span> row: city_cn_mapping.get(row[<span class="st">'org_cn_head_en'</span>], row[<span class="st">'city_cn'</span>]), axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'city_en'</span>] <span class="op">=</span> orgs_expld.<span class="bu">apply</span>(</span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">lambda</span> row: city_en_mapping.get(row[<span class="st">'org_cn_head_en'</span>], row[<span class="st">'city_en'</span>]), axis<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="82018e32" class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>title_dict <span class="op">=</span> df.set_index(<span class="st">'url'</span>)[<span class="st">'title_cn'</span>].to_dict()</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>year_dict <span class="op">=</span> df.set_index(<span class="st">'url'</span>)[<span class="st">'date'</span>].to_dict()</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'title_cn'</span>] <span class="op">=</span> orgs_expld[<span class="st">'url'</span>].<span class="bu">map</span>(title_dict)</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'year'</span>] <span class="op">=</span> orgs_expld[<span class="st">'url'</span>].<span class="bu">map</span>(year_dict)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="3e250ed5" class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>orgs_expld <span class="op">=</span> orgs_expld.rename(columns<span class="op">=</span>{<span class="st">'org_cn_head_en'</span>: <span class="st">'orgs_head'</span>})</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'orgs_head'</span>] <span class="op">=</span> orgs_expld[<span class="st">'orgs_head'</span>].<span class="bu">str</span>.title()</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'orgs_head'</span>] <span class="op">=</span> orgs_expld[<span class="st">'orgs_head'</span>].<span class="bu">str</span>.replace(</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Cas'</span>, <span class="st">'CAS'</span>, regex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'orgs_head'</span>] <span class="op">=</span> orgs_expld[<span class="st">'orgs_head'</span>].<span class="bu">str</span>.replace(</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Of'</span>, <span class="st">'of'</span>, regex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>orgs_expld[<span class="st">'orgs_head'</span>] <span class="op">=</span> orgs_expld[<span class="st">'orgs_head'</span>].<span class="bu">str</span>.replace(</span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'And'</span>, <span class="st">'and'</span>, regex<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="3f094940" class="cell" data-execution_count="69">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>orgs_expld.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="69">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">url</th>
<th data-quarto-table-cell-role="th">org_cn</th>
<th data-quarto-table-cell-role="th">city_cn</th>
<th data-quarto-table-cell-role="th">city_en</th>
<th data-quarto-table-cell-role="th">org_cn_head</th>
<th data-quarto-table-cell-role="th">orgs_head</th>
<th data-quarto-table-cell-role="th">title_cn</th>
<th data-quarto-table-cell-role="th">year</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>北京大学</td>
<td>北京</td>
<td>Beijing</td>
<td>北京大学</td>
<td>Peking University</td>
<td>AI助力打造科学研究新范式</td>
<td>2024</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>北京科学智能研究院</td>
<td>北京</td>
<td>Beijing</td>
<td>北京科学智能研究院</td>
<td>Beijing Institute of Scientific and Intelligen...</td>
<td>AI助力打造科学研究新范式</td>
<td>2024</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>中国科学院自动化研究所 复杂系统管理与控制国家重点实验室</td>
<td>北京</td>
<td>Beijing</td>
<td>中国科学院自动化研究所</td>
<td>Institute of Automation, CAS</td>
<td>数字科学家与平行科学：AI4S和S4AI的本源与目标</td>
<td>2024</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>澳门科技大学 创新工程学院</td>
<td>澳门</td>
<td>Macau</td>
<td>澳门科技大学</td>
<td>Macau University of Science and Technology</td>
<td>数字科学家与平行科学：AI4S和S4AI的本源与目标</td>
<td>2024</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>http://old2022.bulletin.cas.cn/zgkxyyk/ch/read...</td>
<td>中国科学院自动化研究所 多模态人工智能系统全国重点实验室</td>
<td>北京</td>
<td>Beijing</td>
<td>中国科学院自动化研究所</td>
<td>Institute of Automation, CAS</td>
<td>数字科学家与平行科学：AI4S和S4AI的本源与目标</td>
<td>2024</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="d9a8ffcb" class="cell" data-execution_count="70">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>orgs_expld.to_csv(<span class="st">'data/orgs_flat.csv'</span>, index<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fund-projects" class="level2">
<h2 class="anchored" data-anchor-id="fund-projects">Fund Projects</h2>
<p>Finally, we need to clean the data about associated fund projects.</p>
<div id="770a2ffd" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>fund <span class="op">=</span> df[[<span class="st">'date'</span>, <span class="st">'title_cn'</span>, <span class="st">'fund_project'</span>]]</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>fund.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>(7216, 3)</code></pre>
</div>
</div>
<div id="7e6caff3" class="cell" data-execution_count="104">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>fund <span class="op">=</span> fund[fund[<span class="st">'fund_project'</span>].<span class="bu">str</span>.strip() <span class="op">!=</span> <span class="st">''</span>]</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>fund.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="104">
<pre><code>(1054, 4)</code></pre>
</div>
</div>
<div id="029a95f8" class="cell" data-execution_count="105">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>fund[<span class="st">'fund_project'</span>] <span class="op">=</span> fund[<span class="st">'fund_project'</span>].<span class="bu">str</span>.replace(</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'基金项目：'</span>, <span class="st">''</span>, regex<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="210acd1d" class="cell" data-execution_count="106">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>fund[<span class="st">'fund_project'</span>] <span class="op">=</span> (fund[<span class="st">'fund_project'</span>].<span class="bu">str</span>.replace(<span class="st">','</span>, <span class="st">'，'</span>, regex<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>                                            .<span class="bu">str</span>.replace(<span class="st">';'</span>, <span class="st">'，'</span>, regex<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>                                            .<span class="bu">str</span>.replace(<span class="vs">r'\('</span>, <span class="st">'（'</span>, regex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>                                            .<span class="bu">str</span>.replace(<span class="vs">r'\)'</span>, <span class="st">'）'</span>, regex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>                                            .<span class="bu">str</span>.replace(<span class="st">'!'</span>, <span class="st">'，'</span>, regex<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>                                            .<span class="bu">str</span>.replace(<span class="st">'；'</span>, <span class="st">'，'</span>, regex<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>                        )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="9ac13f3d" class="cell" data-execution_count="107">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> replace_commas_in_brackets(text):</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> re.sub(<span class="vs">r'[（(](.*?)[）)]'</span>, <span class="kw">lambda</span> m: re.sub(<span class="vs">r'[!,;，；]'</span>, <span class="st">'、'</span>, m.group()), text)</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>fund[<span class="st">'fund_project'</span>] <span class="op">=</span> fund[<span class="st">'fund_project'</span>].<span class="bu">apply</span>(replace_commas_in_brackets)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="0474f623" class="cell" data-execution_count="108">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>fund[<span class="st">'fund_project'</span>] <span class="op">=</span> fund[<span class="st">'fund_project'</span>].<span class="bu">str</span>.split(<span class="st">'，'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="2c001493" class="cell" data-execution_count="110">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>fund_expld <span class="op">=</span> fund.explode(<span class="st">'fund_project'</span>).reset_index()</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>fund_expld[<span class="st">'fund_project'</span>] <span class="op">=</span> fund_expld[<span class="st">'fund_project'</span>].<span class="bu">str</span>.replace(<span class="st">'）、'</span>, <span class="st">'），'</span>)</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>fund_expld[<span class="st">'fund_project'</span>] <span class="op">=</span> fund_expld[<span class="st">'fund_project'</span>].<span class="bu">str</span>.split(<span class="st">'，'</span>)</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>fund_expld <span class="op">=</span> fund_expld.explode(<span class="st">'fund_project'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="da143ada" class="cell" data-execution_count="112">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># drop irrelevant rows</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>fund_expld <span class="op">=</span> fund_expld.drop(index<span class="op">=</span>[<span class="dv">1643</span>] <span class="op">+</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1654</span>, <span class="dv">1667</span>)))</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>fund_expld <span class="op">=</span> fund_expld.drop(index<span class="op">=</span>[<span class="dv">1645</span>, <span class="dv">1646</span>, <span class="dv">1839</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cb2df324" class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>fund_expld.to_csv(<span class="st">'data/bcas_fund_projects.csv'</span>, index<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="774a683d" class="cell" data-execution_count="113">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>df.to_csv(<span class="st">'data/bcas_dataset_fin.csv'</span>, index<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright 2024, Dzmitry Mazanik</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>